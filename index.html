<!doctype html>
<html lang="en" class="bgCol">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PBoard</title>
  <link rel="icon" type="image/png" href="./favicon.png"/>
  <link rel="shortcut icon" type="image/png" href="./favicon.png"/>

  <script src="./_external/jquery-3.3.1.min.js"></script>
<script src="./_external/popper.min.js"></script>
<script src="./_external/bootstrap.min.js"></script>
<script src="./_external/bootbox.js"></script>
<script src="./_external/jquery-ui.min.js"></script>
<script src="./_external/jquery.ui.touch-punch.js"></script>
<script src="./_external/js.cookie.min.js"></script>


<link rel="stylesheet" href="./_external/bootstrap.min.css">
<link rel="stylesheet" href="./_external/fa-all.css">
<link rel="stylesheet" href="./_external/fa-v4-shims.css">


<link rel="stylesheet" href="./index.css">
<link rel="stylesheet" href="./boardStuff.css">




<!-- utils used everywhere -->
<script defer src="./js/utils.js"></script>

<!-- core classes  -->
<script defer src="./js/classes/Tag.js"></script>
<script defer src="./js/classes/Extension.js"></script>
<script defer src="./js/classes/PBoard.js"></script>

<!--main-->
<script defer src="./js/navigation.js"></script>
<script defer src="./js/newBoards.js"></script>
<script defer src="./js/_manager.js"></script>

<!-- objects -->
<script defer src="./js/objects/html.js"></script>
<script defer src="./js/objects/updater.js"></script>
<script defer src="./js/objects/sync.js"></script>
<script defer src="./js/objects/boardHistory.js"></script>
<script defer src="./js/objects/extensions.js"></script>
<script defer src="./js/objects/css.js"></script>

<!-- Storage -->
<script defer src="./js/storage/_storage.js"></script>
<script defer src="./js/storage/drive.js"></script>

<!-- view model -->
<script defer src="./js/view/view.js"></script>

<!-- ui scripts -->
<script defer src="./js/ui/dialogs.js"></script>
<script defer src="./js/ui/dataBinder.js"></script>
<script defer src="./js/ui/autoCSS.js"></script>
<script defer src="./js/ui/ui.js"></script>
<script defer src="./js/ui/ui2.js"></script>
<script defer src="./js/ui/styler.js"></script>

<!-- dialog and editor scripts -->
<!--
<script defer src="./js/dialogs/optionsDialog.js"></script>
<script defer src="./js/dialogs/extrasDialog.js"></script>
<script defer src="./js/dialogs/tagsDialog.js"></script>
<script defer src="./js/dialogs/extensionsDialog.js"></script>
<script defer src="./js/dialogs/preferencesDialog.js"></script>
<script defer src="./js/dialogs/backupsDialog.js"></script>
<script defer src="./js/dialogs/textEditor.js"></script>
<script defer src="./js/dialogs/extensionEditor.js"></script>
<script defer src="./js/dialogs/tagEditor.js"></script>
-->
<script defer src="./js/_entry.js"></script>

<!-- Connect to storage: google drive -->
<script defer src="https://apis.google.com/js/api.js"
onload="this.onload=()=>{}; drive_storage.OnStorageLoad();">
</script>
</head>



<body>
  <style id="style">

  #main {
    padding-top: 50px; /* set based on headerHeight */
  }

  #main>*{
    width: 100%;
  }
  .listHolder>.list{
    width: 300px;
    margin: 0px 3px 0px 3px;
  }
  .list {
    /* background-color: #555555; */
    flex: 0 0 auto; /*dont shrink or expand*/
  }

  .tile{
    margin: 5px 0px 5px 0px;
    min-width: 250px;
    max-width: 400px;
    height: 150px;
    flex: 0 0 auto; /*dont shrink or expand*/
    background-color: #444444;
  }
  

  [data-name="tile-text"]{
    width: 100%;
    height: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    color: white;
  }

  [data-name="list-title"]{
    height: 27px;
    padding: 2px 2px 0px 5px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: bolder;
    color:white;
  }

  [data-name="list-adder"]{
    height: 34px;
  }
  
  [data-name="tile-textIcon"]{
    font-size: 12px;
    margin-top:-2px;
    color:#777777;
  }

  
  [data-name="ablum-adder"]{
    height: 31px;
    padding: 2px 2px 0px 5px;
    font-weight: bolder;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  
</style>

  <header id="header">

  <!-- Folded/Hidden content -->
  <div id="navbarHeader" class="fWidth bg-inh collapse" style="transition: none;">
    <div class="container-fluid fWidth d-flex" style="padding: 0px !important;">

      <form class="row text bg-inherit" style="margin: 0px; flex: 1;">
        <textarea id="boardDescription" oninput="expandInput(this);boardDescriptionChanged(event);"
        placeholder="Board Description" wrap="hard" class="expandInput card-name bg-inherit"
        style="resize: none;  margin: 3px; text-overflow: ellipsis; border: 0px; width: 100%;"></textarea>

        <input type="submit" style="visibility: hidden; width:0px; height:0px; position:absolute;" />
      </form>

      <button onclick="showExtrasClicked(event)" class="b"><i class="fas fa-cogs"></i></button>

    </div>
  </div>

  <!-- Visible unfolded -->
  <div class="bg-inh d-flex fWdith" style="padding: 1px !important;">

    <!-- Header expand button -->
    <button onclick="setTimeout(()=>{expandInput(document.getElementById('boardDescription'));},1);" type="button" class="b collapsed"
    data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false">
      <i class="fas fa-bars"></i>
    </button>

    <button id="homeBtn" class="b"><i class="fas fa-home"></i></button>
    <button id="upBtn" class="b"><i class="fas fa-arrow-left"></i></button>

    <button id="saveBtn" class="b"><i class="fas fa-save"></i></button>
    <button id="saveDownloadBtn" class="b"><i class="fas fa-download"></i></button>
    <button id="loadBtn" class="b"><i class="fas fa-folder-open"></i></button>

    <!-- Board Title -->
    <input id="boardTitle" oninput="boardTitleChanged(event)" type="text" placeholder="Title" 
    style="flex: 1; overflow: hidden; text-overflow: ellipsis; font-weight: bold;">
  
    

  </div>

</header>

  <!-- Dialogs -->

<div id="textBoardDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-id="" aria-hidden="true" onclick="textBackClicked(event)">
  <div class="modal-dialog" role="document" style="width: 95%; max-width: 600px; background-color: #343434;border-radius: 5px;">
    <div class="modal-content bg-inherit" style="border-radius: 5px;">
      <div class="modal-header text-center bg-inherit" style="padding: 5px;">
        <form onsubmit="event.preventDefault(); closeTextBoardDialog(event);" style="width: calc(100% - 30px); padding-left: 5px; padding-right: 2px; padding-top: 2px;">
          <input type="text" class="card-name bg-inherit" id="textBoardDialogTitle"
          style="width: 100%; padding: 0px; white-space: nowrap; overflow: hidden; font-weight: bolder; text-overflow: ellipsis; color:white; border: 0px; font-size: 20px;"
          value="Title" oninput="textTitleChanged(event)" placeholder="Title"></input>
          <input type="submit" style="visibility: hidden; width:0px; height:0px; position:absolute;" />
        </form >
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"  tabindex="-1" style="padding: 4px;margin:0px!important;margin-top:-3px !important;color:white;" onclick="textCloseClicked(event)">
          <span aria-hidden="true">&#215;</span>
        </button>
        
      </div>
      <div class="modal-body">
        
          <form class="row text bg-inherit" style="margin: 0px; width:100%; min-height: 115px;">
              <textarea wrap="hard" class="expandInput card-name bg-inherit"  id="textBoardDialogText"
                style="resize: none; padding: 2px 2px 2px 5px; text-overflow: ellipsis; color: white; border: 0px; width: 100%; height: 59px; font-size: 18px; min-height: 120px;"
                oninput="expandInput(this);textDescriptionChanged(event);" placeholder="Description">Text</textarea>
      
              <input type="submit" style="visibility: hidden; width:0px; height:0px; position:absolute;" />
          </form>

      </div>
    </div>
  </div>
</div>


<div id="extensionEditorDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-id="" aria-hidden="true" onclick="textBackClicked(event)">
  <div class="modal-dialog" role="document" style="width: 95%; max-width: 600px; background-color: #343434;border-radius: 5px;">
    <div class="modal-content bg-inherit" style="border-radius: 5px;">
      <div class="modal-header text-center bg-inherit" style="padding: 5px;">
        <form onsubmit="event.preventDefault(); closeExtensionEditorTitleChanged(event)" placeholder="Title"></input>
          <input type="submit" style="visibility: hidden; width:0px; height:0px; position:absolute;" />
        </form >
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"  tabindex="-1" style="padding: 4px;margin:0px!important;margin-top:-3px !important;color:white;" onclick="alert('closing button??')">
          <span aria-hidden="true">&#215;</span>
        </button>
        
      </div>
      <div class="modal-body">
        
          <form class="row text bg-inherit" style="margin: 0px; width:100%;">
              <textarea wrap="hard" class="expandInput card-name bg-inherit"  id="extensionEditorText"
                style="resize: none; padding: 2px 2px 2px 5px; text-overflow: ellipsis; color: white; border: 0px; width: 100%; height: 59px; font-size: 18px;"
                oninput="expandInput(this);textDescriptionChanged(event);" placeholder="Description">Text</textarea>
      
              <input type="submit" style="visibility: hidden; width:0px; height:0px; position:absolute;" />
          </form>

      </div>
    </div>
  </div>
</div>


<div id="optionsDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document" style="width: 95%; max-width: 300px; background-color: #343434;border-radius: 5px;">
    <div class="modal-content bg-inherit" style="border-radius: 5px;">
      <div class="modal-body">
        
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" onclick="removeClicked(event)">Remove</button>
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" onclick="deleteClicked(event)">Delete</button>
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" onclick="copyIdClicked(event)">Copy ID (reference)</button>
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" onclick="showSeeReferencesDialog(event)">See References</button>
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" onclick="showBoardExtrasDialog(event)">Extras</button>

      </div>
    </div>
  </div>
</div>


<div id="extrasDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" onclick="extrasBackgroundClicked(event)">
  <div class="modal-dialog" role="document" style="width: 95%; max-width: 800px; background-color: #343434;border-radius: 5px;">
    <div class="modal-content bg-inherit" style="border-radius: 5px;">
      <div class="modal-body" style="text-align: center;">

        <div>
          <a id="extrasTitle" style="color: white; background-color: black;">Board Extras</a>
          <button id="extrasBack" style="float: right; color: white; background-color: black; border: 0px;"><i class="fa fa-arrow-left" aria-hidden="true"></i></button>
        </div>

        <br>
        <div  id="extrasContent" style="margin:2px;"></div>
      
      </div>
    </div>
  </div>
</div>


<div id="referencesDialog" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document" style="width: 95%; max-width: 300px; background-color: #343434;border-radius: 5px;">
    <div class="modal-content bg-inherit" style="border-radius: 5px;">
      
      <template id="referencesDialogBtn">
        <button type="button" class="btn bg-inherit btn-dark" style="width: 100%; margin: 5px; padding: 3px; font-size: 18px;" data-id="" onclick="referencesDialogBtn(event)">Remove</button>
      </template>

      <div id="referencesDialogList" class="modal-body">
      </div>

    </div>
  </div>
</div>


<!-- End Of Dialogs -->


  <!-- Status Indicators -->
  <img id="savingIndicator" src="./icons/saveIndicator.gif" class="statusIndicator" style="top: 60px; display: none;" tabindex="-1"></img>
  <img id="loadingIndicator" src="./icons/loadIndicator.gif" class="statusIndicator" style="top: 90px; display: none;" tabindex="-1"></img>


  <!-- Templates for new boards -->

<!-- List Holder (album): -->

<template id="album-template">
   <!-- List View -->
  <div data-name="album" class="album listHolder d-flex bg-inh draggableAlbum">

    <!-- Contents go here -->
    <div data-name="album-holder" class="listHolder d-flex">

    </div>


    <input data-name="album-adder" type="text" onblur="this.value = ''"
    class="list bgDark cWhite fWidth" style="height: 30px;" placeholder="Add a new list..."></input>

  </div>
</template>

 



<!-- Tile Holder (list): -->

<template id="list-template">
  <div data-name="list" class="list draggableList">
    
    <!-- List title -->
    <div data-name="list-header" class="d-flex fWidth bg-inh" style="position: /*Needed because .dot is absolute*/ relative;">
      <input data-name="list-title" type="text" class="bg-inh fWidth"></input>

      <button data-name="list-optionsBtn" type="button" class="dot"></button>
    </div>

    <!-- Tiles go here -->
    
    <div data-name="list-holder">

    </div>


    <!-- New Text,Board,Reference buttons at list bottom template -->
    <div data-name="list-adder" class="d-flex bg-inh">
      <button data-name="list-adder-text" type="button" class="b">
        Text
      </button>
      <button data-name="list-adder-board" type="button" class="b">
        Board
      </button>
      <button data-name="list-adder-list" type="button" class="b">
        List
      </button>
      <button data-name="list-adder-reference" type="button" class="b">
        Reference
      </button>
    </div>


  </div>
</template>



<!-- Tiles / ContentHolders: -->

<template id="tile-template">
  <section data-name="tile" class="tile draggable" style="position: /*Needed because .dot is absolute*/ relative;">

    <button data-name="tile-optionsBtn" class="dot"></button>

    <div data-name="tile-text" class="bg-inh">
      <span data-name="tile-textIcon" class="fa fa-align-right d-none">&nbsp;</span>
      Text
    </div>

    
    <!-- Needs image here -->

  </section>
</template>


<!-- End Of Templates -->
  

  <!-- Content goes in here: -->
  <div id="main" class="bgCol">
    
  </div>

</body>

</html>